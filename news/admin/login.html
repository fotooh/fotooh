<!DOCTYPE html><html lang="ar" dir="rtl"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>تسجيل دخول المشرفين | مؤسسة الفتـوح للتنمية</title><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"><link rel="stylesheet" href="../../css/font.css"><link rel="stylesheet" href="../../css/style.css"><link rel="stylesheet" href="../../css/news.css"><style>:root{--primary-color:#2c3e50;--secondary-color:#3498db;--accent-color:#e74c3c;--light-color:#f8f9fa;--dark-color:#343a40;--success-color:#28a745;--danger-color:#dc3545;--border-color:#dee2e6;--text-color:#212529;--text-light:#6c757d}*{margin:0;padding:0;box-sizing:border-box;font-family:Tajawal,sans-serif}body{background:linear-gradient(135deg,#f5f7fa 0,#e4e8f0 100%);color:var(--text-color);direction:rtl;min-height:100vh}a{text-decoration:none;color:inherit}.login-container{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:100px 20px 20px;margin-top:20px}.login-box{background:#fff;padding:2.5rem;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.1);width:100%;max-width:450px;text-align:center;position:relative;overflow:hidden}.login-box::before{content:'';position:absolute;top:0;right:0;width:100%;height:5px;background:linear-gradient(90deg,var(--primary-color),var(--secondary-color))}.login-icon{width:80px;height:80px;background:var(--light-color);border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 1.5rem;color:var(--secondary-color);font-size:2rem;border:2px dashed var(--secondary-color)}.login-box h2{color:var(--primary-color);margin-bottom:1.5rem;font-size:1.75rem;font-weight:700}.login-form{text-align:right}.form-group{margin-bottom:1.5rem;text-align:right;position:relative}.form-group label{display:block;margin-bottom:.5rem;color:var(--text-color);font-weight:600}.input-container{position:relative}.form-group input{width:100%;padding:.85rem 3rem .85rem 1rem;border:1px solid var(--border-color);border-radius:8px;font-size:1rem;transition:all .3s}.form-group input:focus{border-color:var(--secondary-color);box-shadow:0 0 0 3px rgba(52,152,219,.2);outline:0}.input-icon{position:absolute;top:50%;right:1rem;transform:translateY(-50%);color:var(--text-light)}.toggle-password{position:absolute;top:50%;left:1rem;transform:translateY(-50%);cursor:pointer;color:var(--text-light);z-index:2;background:0 0;border:none;font-size:1rem}.btn{display:inline-block;width:100%;padding:.9rem 1.5rem;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s;border:none;font-size:1rem;position:relative}.btn-primary{background-color:var(--secondary-color);color:#fff}.btn-primary:hover{background-color:#2186c4;transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,.15)}.btn-primary:active{transform:translateY(0)}.spinner{border:2px solid rgba(255,255,255,.3);border-radius:50%;border-top:2px solid #fff;width:16px;height:16px;animation:spin 1s linear infinite;display:inline-block;margin-right:8px;vertical-align:middle}@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.message{padding:12px 15px;border-radius:8px;margin-bottom:20px;text-align:right;display:flex;align-items:center;justify-content:flex-start}.message i{margin-left:10px}.message.error{background:#ffebee;color:#c62828;border-right:3px solid #c62828}.message.success{background:#e8f5e9;color:#2e7d32;border-right:3px solid #2e7d32}.login-options{display:flex;justify-content:space-between;align-items:center;margin-top:1rem;font-size:.95rem}.forgot-password{color:var(--secondary-color);transition:color .3s}.forgot-password:hover{color:#2186c4;text-decoration:underline}@media (max-width:768px){.mobile-menu-btn{display:block}.login-box{padding:2rem 1.5rem}.login-box h2{font-size:1.5rem}.login-options{flex-direction:column;gap:1rem;align-items:flex-start}}</style></head><body><header class="header"><div class="container"><div class="logo"><img src="../../images/logo.jpg" alt="شعار مؤسسة الفتـوح للتنمية"><h1>مؤسسة الفتـوح للتنمية</h1></div><nav class="navbar" id="navbar"><ul><li><a href="../../index.html">الرئيسية</a></li><li><a href="../../about.html">من نحن</a></li><li><a href="../../services.html">الخدمات</a></li><li><a href="../../news/index.html">الأخبار</a></li><li><a href="../../contact.html">اتصل بنا</a></li><li><a href="login.html" class="active">تسجيل الدخول</a></li></ul></nav><div class="mobile-menu-btn" id="mobileMenuBtn"><i class="fas fa-bars"></i></div></div></header><div class="login-container"><div class="login-box"><div class="login-icon"><i class="fas fa-user-lock"></i></div><h2>تسجيل دخول المشرفين</h2><div id="messageContainer"></div><form id="loginForm" class="login-form"><div class="form-group"><div class="input-container"><input type="email" id="email" required autocomplete="username" placeholder="أدخل بريدك الإلكتروني"> <span class="input-icon"><i class="fas fa-envelope"></i></span></div></div><div class="form-group"><div class="input-container"><input type="password" id="password" required autocomplete="current-password" placeholder="أدخل كلمة المرور"> <span class="input-icon"><i class="fas fa-lock"></i></span> <button type="button" class="toggle-password" id="togglePassword"><i class="far fa-eye"></i></button></div></div><button type="submit" class="btn btn-primary" id="loginBtn"><span id="loginText">دخول</span><div id="loginSpinner" class="spinner" style="display:none"></div></button><div class="login-options"><a href="#" id="forgotPasswordLink" class="forgot-password">نسيت كلمة المرور؟</a></div></form></div></div><script src="../../js/script.js"></script><script type="module">import{login}from"../../js/admin/auth.js";import{supabase}from"../../js/supabase.js";const loginForm=document.getElementById("loginForm"),emailInput=document.getElementById("email"),passwordInput=document.getElementById("password"),togglePasswordBtn=document.getElementById("togglePassword"),loginBtn=document.getElementById("loginBtn"),loginText=document.getElementById("loginText"),loginSpinner=document.getElementById("loginSpinner"),messageContainer=document.getElementById("messageContainer"),forgotPasswordLink=document.getElementById("forgotPasswordLink"),mobileMenuBtn=document.getElementById("mobileMenuBtn"),navbar=document.getElementById("navbar");function showMessage(e,n="error"){messageContainer.innerHTML=`\n                <div class="message ${n}">\n                    <i class="fas ${"error"===n?"fa-exclamation-circle":"fa-check-circle"}"></i>\n                    ${e}\n                </div>\n            `}function getFriendlyError(e){return{"Invalid login credentials":"البريد الإلكتروني أو كلمة المرور غير صحيحة","Email not confirmed":"يجب تأكيد بريدك الإلكتروني أولاً","Too many requests":"عدد محاولات تسجيل الدخول كثيرة، يرجى المحاولة لاحقاً"}[e]||"حدث خطأ أثناء التسجيل، يرجى المحاولة لاحقاً"}togglePasswordBtn.addEventListener("click",function(){const e="password"===passwordInput.getAttribute("type")?"text":"password";passwordInput.setAttribute("type",e),this.innerHTML="password"===e?'<i class="far fa-eye"></i>':'<i class="far fa-eye-slash"></i>'}),forgotPasswordLink.addEventListener("click",async e=>{e.preventDefault();const n=emailInput.value.trim();if(n)try{const{error:e}=await supabase.auth.resetPasswordForEmail(n,{redirectTo:window.location.origin+"/news/admin/reset-password.html"});if(e)throw new Error(e.message);showMessage("تم إرسال رابط إعادة تعيين كلمة المرور إلى بريدك الإلكتروني","success")}catch(e){showMessage(getFriendlyError(e.message))}else showMessage("يرجى إدخال بريدك الإلكتروني أولاً")}),loginForm.addEventListener("submit",async e=>{e.preventDefault();const n=emailInput.value.trim(),t=passwordInput.value;if(n)if(t){loginBtn.disabled=!0,loginText.textContent="جاري التسجيل...",loginSpinner.style.display="inline-block";try{const{error:e}=await login(n,t);if(e)throw new Error(e.message);showMessage("تم تسجيل الدخول بنجاح! جاري التوجيه...","success"),setTimeout(()=>{window.location.href="index.html"},1500)}catch(e){showMessage(getFriendlyError(e.message))}finally{loginBtn.disabled=!1,loginText.textContent="دخول",loginSpinner.style.display="none"}}else showMessage("يرجى إدخال كلمة المرور");else showMessage("يرجى إدخال البريد الإلكتروني")})</script></body></html>